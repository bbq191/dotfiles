#!/bin/bash
# =============================================================================
#                    å¢å¼ºçš„ Bash é…ç½®æ–‡ä»¶ - èåˆ ZSH åŠŸèƒ½
# =============================================================================
# ç”± dotfiles ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘
# åŸºäº Arch Linux .zshrc çš„åŠŸèƒ½å®Œå…¨ç§»æ¤åˆ° Bash
# ç”Ÿæˆæ—¶é—´: $(date)
# æ¨¡æ¿ç‰ˆæœ¬: 2.0.0 (ZSH Enhanced)

# =============================================================================
#                               1. åŸºç¡€ç¯å¢ƒè®¾ç½®
# =============================================================================

{% if config.zsh_integration.proxy.enabled %}
# ä»£ç†è®¾ç½®
export HTTPS_PROXY="{{ config.zsh_integration.proxy.settings.https_proxy }}"
export HTTP_PROXY="{{ config.zsh_integration.proxy.settings.http_proxy }}"
export ALL_PROXY="{{ config.zsh_integration.proxy.settings.all_proxy }}"
export NO_PROXY="{{ config.zsh_integration.proxy.settings.no_proxy }}"
{% endif %}

# åŸºç¡€ç³»ç»Ÿç¯å¢ƒå˜é‡
{% for key, value in config.shared.environment.items() %}
export {{ key }}="{{ value }}"
{% endfor %}

# ç”¨æˆ·è‡ªå®šä¹‰ç¯å¢ƒå˜é‡
export DEFAULT_USER=$USER
export MANWIDTH=999
export LESSHISTFILE=-

# =============================================================================
#                               2. XDG ç›®å½•è§„èŒƒ
# =============================================================================
{% if config.zsh_integration.xdg_directories.enabled %}
# éµå¾ª XDG Base Directory è§„èŒƒ

export XDG_CONFIG_HOME="{{ config.zsh_integration.xdg_directories.config_home }}"
export XDG_DATA_HOME="{{ config.zsh_integration.xdg_directories.data_home }}"
export XDG_STATE_HOME="{{ config.zsh_integration.xdg_directories.state_home }}"
export XDG_CACHE_HOME="{{ config.zsh_integration.xdg_directories.cache_home }}"
{% endif %}

# =============================================================================
#                               3. ç‰ˆæœ¬ç®¡ç†å™¨åˆå§‹åŒ–
# =============================================================================

{% if config.zsh_integration.version_managers.fnm.enabled %}
# fnm (Node.js ç‰ˆæœ¬ç®¡ç†)
{% for key, value in config.zsh_integration.version_managers.fnm.env_vars.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
if command -v fnm > /dev/null; then
    eval "$(fnm env --use-on-cd)"
fi
{% endif %}

{% if config.zsh_integration.version_managers.pyenv.enabled %}
# pyenv-win (Python ç‰ˆæœ¬ç®¡ç†) 
{% for key, value in config.zsh_integration.version_managers.pyenv.env_vars.items() %}
{% if value is mapping %}
export {{ key }}="{{ value.bash }}"
{% else %}
export {{ key }}="{{ value }}"
{% endif %}
{% endfor %}
{% for path in config.zsh_integration.version_managers.pyenv.path_additions %}
export PATH="{{ path }}:$PATH"
{% endfor %}
# pyenv-win ä¸éœ€è¦ init å‘½ä»¤ï¼Œåªéœ€è¦æ­£ç¡®çš„ PATH å’Œç¯å¢ƒå˜é‡
{% endif %}

{% if config.zsh_integration.version_managers.jabba.enabled %}
# jabba (Java ç‰ˆæœ¬ç®¡ç†)
{% for key, value in config.zsh_integration.version_managers.jabba.env_vars.items() %}
{% if value is mapping %}
export {{ key }}="{{ value.bash }}"
{% else %}
export {{ key }}="{{ value }}"
{% endif %}
{% endfor %}
{% for path in config.zsh_integration.version_managers.jabba.path_additions %}
export PATH="{{ path }}:$PATH"
{% endfor %}
# jabba-win ä¸éœ€è¦ jabba.shï¼Œåªéœ€è¦æ­£ç¡®çš„ PATH
{% endif %}

{% if config.zsh_integration.version_managers.g.enabled %}
# g (Go ç‰ˆæœ¬ç®¡ç†)
{% for key, value in config.zsh_integration.version_managers.g.env_vars.items() %}
{% if value is mapping %}
export {{ key }}="{{ value.bash }}"
{% else %}  
export {{ key }}="{{ value }}"
{% endif %}
{% endfor %}
{% for path in config.zsh_integration.version_managers.g.path_additions %}
export PATH="{{ path }}:$PATH"
{% endfor %}
{% endif %}

# =============================================================================
#                               4. Git å·¥å…·é…ç½®
# =============================================================================

{% if config.zsh_integration.git_tools.delta.enabled %}
# é…ç½® Git Delta
if command -v delta > /dev/null; then
    {% for key, value in config.zsh_integration.git_tools.delta.git_config.items() %}
    git config --global {{ key }} "{{ value }}"
    {% endfor %}
fi
{% endif %}

{% if config.zsh_integration.git_tools.lazygit.enabled %}
# lazygit åˆ«å
if command -v lazygit > /dev/null; then
    {% for alias, command in config.zsh_integration.git_tools.lazygit.aliases.items() %}
    alias {{ alias }}="{{ command }}"
    {% endfor %}
fi
{% endif %}

{% if config.zsh_integration.git_tools.gh.enabled %}
# GitHub CLI åˆ«å
if command -v gh > /dev/null; then
    {% for alias, command in config.zsh_integration.git_tools.gh.aliases.items() %}
    alias {{ alias }}="{{ command }}"
    {% endfor %}
fi
{% endif %}

# =============================================================================
#                               5. å¼€å‘ç¯å¢ƒé…ç½®
# =============================================================================

# Android å¼€å‘ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.android.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Go è¯­è¨€ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.go.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Java ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.java.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Rust ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.rust.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Python ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.python.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Ruby ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.ruby.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Node.js ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.node.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Maven ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.maven.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# Gradle ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.gradle.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# vscode ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.vscode.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# mysql ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.mysql.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
# pyenv ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.pyenv.items() %}
export {{ key }}="{{ value.bash }}"
{% endfor %}
# miller ç¯å¢ƒ  
{% for key, value in config.zsh_integration.development_environments.miller.items() %}
export {{ key }}="{{ value.bash }}"
{% endfor %}
# github cli ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.github_cli.items() %}
export {{ key }}="{{ value.bash }}"
{% endfor %}
# claude code ç¯å¢ƒ
{% for key, value in config.zsh_integration.development_environments.claude_code.items() %}
export {{ key }}="{{ value }}"
{% endfor %}

# =============================================================================
#                               4. PATH ç¯å¢ƒå˜é‡æ„å»º
# =============================================================================
# æ„å»ºå¢å¼ºçš„ PATHï¼ˆæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼‰
export PATH="PYTHONPATH":"PYTHONUSERBASE":"GOMODCACHE":"$GOPATH":"$NPM_HOME":"$EDITOR_HOME/bin":"$MYSQL_HOME/bin":"{{ config.zsh_integration.development_environments.pyenv.PYENV_PATH.bash }}/bin":"{{ config.zsh_integration.development_environments.miller.MILLER_PATH.bash }}":"{{ config.zsh_integration.development_environments.github_cli.GH_PATH.bash }}":"$PATH"

# =============================================================================
#                               5. Bash å†å²è®°å½•å¢å¼ºé…ç½®
# =============================================================================

# å†å²æ–‡ä»¶ä½ç½®ï¼ˆéµå¾ª XDG è§„èŒƒï¼‰
export HISTFILE="{{ config.zsh_integration.history_advanced.file }}"
[ -d "$(dirname "$HISTFILE")" ] || mkdir -p "$(dirname "$HISTFILE")"

# å†å²è®°å½•è®¾ç½®
export HISTSIZE={{ config.zsh_integration.history_advanced.size }}
export HISTFILESIZE={{ config.zsh_integration.history_advanced.save_size }}

# å†å²è®°å½•é€‰é¡¹ï¼ˆBash ç‰ˆæœ¬çš„ ZSH åŠŸèƒ½ï¼‰
export HISTCONTROL=ignoreboth:erasedups  # å¿½ç•¥é‡å¤å’Œç©ºæ ¼å¼€å¤´çš„å‘½ä»¤
shopt -s histappend                      # è¿½åŠ å†å²è€Œä¸æ˜¯è¦†ç›–
shopt -s histverify                      # å†å²æ‰©å±•æ—¶ç»™ç”¨æˆ·ç¡®è®¤æœºä¼š
shopt -s nocaseglob                      # å¯ç”¨ä¸åŒºåˆ†å¤§å°å†™çš„æ–‡ä»¶ååŒ¹é…ï¼ˆglob æ¨¡å¼ï¼‰

# ç¦ç”¨ç»ˆç«¯é“ƒå£°ï¼Œé˜²æ­¢å±å¹•é—ªçƒ
if [[ $- == *i* ]]; then
    # ç¦ç”¨æ‰€æœ‰é“ƒå£°ï¼ˆåŒ…æ‹¬è§†è§‰é“ƒå£°å’Œå£°éŸ³é“ƒå£°ï¼‰
    bind 'set bell-style none'
    # æˆ–è€…å¯ä»¥é€‰æ‹©åªç¦ç”¨è§†è§‰é“ƒå£°ï¼Œä¿ç•™å£°éŸ³ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
    # bind 'set bell-style audible'
fi

# =============================================================================
#                               6. ç°ä»£åŒ–å·¥å…·é›†æˆ
# =============================================================================

# zoxide æ™ºèƒ½ç›®å½•è·³è½¬åˆå§‹åŒ–
{% if config.zsh_integration.modern_tools.replacements.cd.tool == "zoxide" %}
{% for key, value in config.zsh_integration.modern_tools.replacements.cd.env_vars.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
if command -v zoxide > /dev/null; then
    eval "$(zoxide init bash)"
    {% for alias_name, alias_command in config.zsh_integration.modern_tools.replacements.cd.aliases.items() %}
    alias {{ alias_name }}="{{ alias_command }}"
    {% endfor %}
fi
{% endif %}

# ç°ä»£åŒ–å‘½ä»¤æ›¿ä»£ï¼ˆæ™ºèƒ½æ£€æµ‹å’Œå›é€€ï¼‰
{% for tool_name, tool_config in config.zsh_integration.modern_tools.replacements.items() %}
{% if tool_name != "cd" %}
# {{ tool_name|title }} æ›¿ä»£
if command -v {{ tool_config.tool }} &> /dev/null; then
    {% for alias_name, alias_command in tool_config.aliases.items() %}
    alias {{ alias_name }}='{{ alias_command }}'
    {% endfor %}
{% if tool_config.fallback is defined %}
else
    {% for alias_name, alias_command in tool_config.aliases.items() %}
    alias {{ alias_name }}='{{ tool_config.fallback }}'
    {% endfor %}
{% endif %}
fi
{% endif %}

{% endfor %}

# =============================================================================
#                               7. FZF é›†æˆé…ç½®
# =============================================================================
{% if config.zsh_integration.fzf_config.enabled %}

# FZF å‘½ä»¤é…ç½®ï¼ˆæ™ºèƒ½æ£€æµ‹ fd/findï¼‰
if command -v fd > /dev/null; then
    export FZF_DEFAULT_COMMAND="{{ config.zsh_integration.fzf_config.commands.default }}"
    export FZF_CTRL_T_COMMAND="{{ config.zsh_integration.fzf_config.commands.ctrl_t }}"
    export FZF_ALT_C_COMMAND="{{ config.zsh_integration.fzf_config.commands.alt_c }}"
else
    export FZF_DEFAULT_COMMAND="{{ config.zsh_integration.fzf_config.commands.fallback_default }}"
    export FZF_CTRL_T_COMMAND="{{ config.zsh_integration.fzf_config.commands.fallback_ctrl_t }}"
    export FZF_ALT_C_COMMAND="{{ config.zsh_integration.fzf_config.commands.fallback_alt_c }}"
fi

# FZF ä¸»é¢˜é…ç½®
export FZF_DEFAULT_OPTS="{{ config.zsh_integration.fzf_config.theme.colors }} {{ config.zsh_integration.fzf_config.theme.layout }}"

# FZF é”®ç»‘å®šå’Œè¡¥å…¨åˆå§‹åŒ– (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]] && command -v fzf > /dev/null; then
    # å¯ç”¨ FZF é”®ç»‘å®š (Ctrl+T, Ctrl+R, Alt+C)
    eval "$(fzf --bash)"
fi

# FZF é¢„è§ˆé…ç½®
if command -v bat > /dev/null; then
    export FZF_CTRL_T_OPTS="{{ config.zsh_integration.fzf_config.preview.ctrl_t }}"
else
    export FZF_CTRL_T_OPTS="{{ config.zsh_integration.fzf_config.preview.ctrl_t_fallback }}"
fi

if command -v eza > /dev/null; then
    export FZF_ALT_C_OPTS="{{ config.zsh_integration.fzf_config.preview.alt_c }}"
elif command -v tree > /dev/null; then
    export FZF_ALT_C_OPTS="{{ config.zsh_integration.fzf_config.preview.alt_c_fallback }}"
else
    export FZF_ALT_C_OPTS="{{ config.zsh_integration.fzf_config.preview.alt_c_final_fallback }}"
fi

{% endif %}

# =============================================================================
#                               8. åˆ«åå®šä¹‰
# =============================================================================

# å®‰å…¨æ“ä½œåˆ«å
alias cp="cp -i"
alias mv='mv -i'
alias rm='rm -i'

# ç³»ç»Ÿä¿¡æ¯åˆ«å
alias free='free -m -h'
alias df='df -h'

# ç½‘ç»œå·¥å…·åˆ«å (ports ç”±å‡½æ•°æä¾›)
# alias ports='netstat -tulanp'

# Git å¢å¼ºåˆ«å
alias g='git'
{% for alias, command in config.aliases.git.items() %}
alias {{ alias }}='{{ command }}'
{% endfor %}
# æ‰©å±• Git åˆ«åï¼ˆé¿å…ä¸åŸºç¡€åˆ«åé‡å¤ï¼‰
# æ³¨æ„ï¼šåŸºç¡€ Git åˆ«åç”±é…ç½®æ–‡ä»¶åŠ¨æ€ç”Ÿæˆï¼Œæ­¤å¤„ä»…æ·»åŠ ä¸åœ¨é…ç½®ä¸­çš„æ‰©å±•åˆ«å
alias gcb='git checkout -b'
alias gst='git stash'
alias gsta='git stash apply'
alias glg='git log --oneline --decorate --graph'
alias glog='git log --oneline --decorate --graph --all'

# ç¼–è¾‘å™¨åˆ«å
alias vim='{{ config.shared.user.editor }}'
alias vi='{{ config.shared.user.editor }}'

# Python å·¥å…·
alias py='python'
alias py3='python3'
alias pip='pip3'

# å¯¼èˆªåˆ«å
{% for alias, command in config.aliases.navigation.items() %}
alias {{ alias }}='{{ command }}'
{% endfor %}

# ç³»ç»Ÿåˆ«å
{% for alias, command in config.aliases.system.bash.items() %}
alias {{ alias }}='{{ command }}'
{% endfor %}

# =============================================================================
#                               9. é«˜çº§å‡½æ•°å®šä¹‰
# =============================================================================

{% for name, func in config.advanced_functions.items() %}
# {{ func.description }}
{{ func.bash }}

{% endfor %}

# =============================================================================
#                               10. å¤–éƒ¨å·¥å…·è‡ªåŠ¨åˆå§‹åŒ–
# =============================================================================

# æ£€æŸ¥å¹¶åˆå§‹åŒ–å¸¸ç”¨å·¥å…· (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
{% for tool, init_command in config.zsh_integration.external_tools.auto_init.items() %}
    command -v {{ tool.split()[0] if ' ' in tool else tool }} > /dev/null && {{ init_command.replace('{shell}', 'bash') }}
{% endfor %}
fi

# =============================================================================
#                               11. æŒ‰é”®ç»‘å®šå¢å¼º
# =============================================================================

# å†å²æœç´¢ç»‘å®š (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[A": history-search-backward'  # ä¸Šç®­å¤´
    bind '"\e[B": history-search-forward'   # ä¸‹ç®­å¤´
fi

# å•è¯å¯¼èˆª (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[1;5C": forward-word'          # Ctrl+å³ç®­å¤´
    bind '"\e[1;5D": backward-word'         # Ctrl+å·¦ç®­å¤´
fi

# è¡Œå¯¼èˆª (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[3~": delete-char'             # Delete é”®
    bind '"\e[H": beginning-of-line'        # Home é”®
    bind '"\e[F": end-of-line'              # End é”®
fi

# =============================================================================
#                               12. è¡¥å…¨ç³»ç»Ÿå¢å¼º
# =============================================================================

# å¯ç”¨å¯ç¼–ç¨‹è¡¥å…¨
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi

# è¡¥å…¨é€‰é¡¹ (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind 'set completion-ignore-case on'     # å¿½ç•¥å¤§å°å†™
    bind 'set show-all-if-ambiguous on'      # æ˜¾ç¤ºæ‰€æœ‰åŒ¹é…é¡¹
    bind 'set menu-complete-display-prefix on' # æ˜¾ç¤ºå…¬å…±å‰ç¼€
fi

# =============================================================================
#                               13. Git é›†æˆå¢å¼º
# =============================================================================
{% if config.shared.features.git_integration %}

# å¢å¼ºçš„ Git åˆ†æ”¯æ˜¾ç¤ºå‡½æ•°
parse_git_branch() {
    # å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿åœ¨Gitä»“åº“ä¸­ä¸”Gitå‘½ä»¤å¯ç”¨
    if ! command -v git >/dev/null 2>&1; then
        return 0
    fi

    # æ£€æŸ¥æ˜¯å¦åœ¨Gitä»“åº“ä¸­
    if ! git rev-parse --git-dir >/dev/null 2>&1; then
        return 0
    fi

    local branch status ahead

    # è·å–åˆ†æ”¯åï¼Œä½¿ç”¨æ›´å®‰å…¨çš„æ–¹æ³•
    branch=$(git symbolic-ref --short HEAD 2>/dev/null || git describe --tags --exact-match 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)

    if [[ -n "$branch" ]]; then
        status=""
        ahead=""

        # æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
        if [[ -n "$(git status --porcelain 2>/dev/null)" ]]; then
            status="*"
        fi

        # æ£€æŸ¥æ˜¯å¦æœ‰æäº¤é¢†å…ˆï¼ˆæ›´å®‰å…¨çš„æ–¹å¼ï¼‰
        if git rev-parse --verify @{upstream} >/dev/null 2>&1; then
            local ahead_count
            ahead_count=$(git rev-list --count @{upstream}..HEAD 2>/dev/null)
            if [[ -n "$ahead_count" && "$ahead_count" -gt 0 ]]; then
                ahead="â†‘$ahead_count"
            fi
        fi

        echo "($branch$status$ahead)"
    fi
}

# å¢å¼ºçš„å‘½ä»¤æç¤ºç¬¦
if [[ $- == *i* ]]; then
    # åŸºç¡€æç¤ºç¬¦ï¼ˆå¦‚æœGitåˆ†æ”¯å‡½æ•°å¤±è´¥ï¼Œç¡®ä¿æœ‰åŸºæœ¬æç¤ºç¬¦ï¼‰
    export PS1="\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[00m\]\$ "

    # å¦‚æœGitå¯ç”¨ï¼Œæ·»åŠ åˆ†æ”¯æ˜¾ç¤º
    if command -v git > /dev/null; then
        export PS1="\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\]\$ "
    fi
fi

{% endif %}

# =============================================================================
#                               14. æ€§èƒ½ä¼˜åŒ–
# =============================================================================

# ç¼–è¯‘ä¼˜åŒ–ï¼ˆå¦‚æœæ”¯æŒï¼‰
{% if config.zsh_integration.performance.makeflags %}
export MAKEFLAGS="{{ config.zsh_integration.performance.makeflags }}"
{% endif %}

# =============================================================================
#                               15. Windows ç‰¹å®šè®¾ç½®
# =============================================================================

if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win32" ]]; then
    # Windows è·¯å¾„è½¬æ¢
    export BROWSER="{{ config.shared.user.browser }}.exe"

    # Windows åˆ«åå¢å¼º
    alias start='explorer'
    alias notepad='notepad.exe'
    alias cls='clear'

    # Windows ç‰¹å®šçš„æœåŠ¡ç®¡ç†
    alias services='services.msc'
    alias regedit='regedit.exe'
fi

# =============================================================================
#                               16. å¯åŠ¨æ¶ˆæ¯å’ŒçŠ¶æ€
# =============================================================================

# å¯åŠ¨æ¶ˆæ¯ (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    echo "ğŸš€ å¢å¼º Bash ç¯å¢ƒå·²åŠ è½½"
    # æ˜¾ç¤ºå¯ç”¨åŠŸèƒ½
    echo ""
    echo "ğŸ’¡ å¢å¼ºåŠŸèƒ½:"
    echo "   ğŸ“‚ ç°ä»£æ–‡ä»¶æ“ä½œ: ll, la, lt"
    echo "   ğŸ” æ™ºèƒ½æœç´¢: fzf é›†æˆ"
    echo "   ğŸŒ ç½‘ç»œå·¥å…·: myip, weather, ports"
    echo "   ğŸ› ï¸  ç³»ç»Ÿå·¥å…·: sysinfo, psmem, pscpu"
    echo "   ğŸ”§ å¼€å‘å·¥å…·: extract, killport, serve"
    echo "   ğŸ“¦ Git å¢å¼º: åˆ†æ”¯çŠ¶æ€æ˜¾ç¤º"
    echo ""
fi

# =============================================================================
#                               17. è‡ªå®šä¹‰é…ç½®åŠ è½½
# =============================================================================

# åŠ è½½æœ¬åœ°è‡ªå®šä¹‰é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
if [ -f ~/.bashrc.local ]; then
    if [[ $- == *i* ]]; then
        echo "ğŸ”§ åŠ è½½æœ¬åœ°è‡ªå®šä¹‰é…ç½®..."
    fi
    source ~/.bashrc.local
fi

# æ ‡è®°é…ç½®åŠ è½½å®Œæˆ
export DOTFILES_ENHANCED_BASH_LOADED=1