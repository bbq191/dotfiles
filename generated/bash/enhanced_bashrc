#!/bin/bash
# =============================================================================
#                    å¢å¼ºçš„ Bash é…ç½®æ–‡ä»¶ - èåˆ ZSH åŠŸèƒ½
# =============================================================================
# ç”± dotfiles ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘
# åŸºäº Arch Linux .zshrc çš„åŠŸèƒ½å®Œå…¨ç§»æ¤åˆ° Bash
# ç”Ÿæˆæ—¶é—´: $(date)
# æ¨¡æ¿ç‰ˆæœ¬: 2.0.0 (ZSH Enhanced)

# =============================================================================
#                               1. åŸºç¡€ç¯å¢ƒè®¾ç½®
# =============================================================================


# ä»£ç†è®¾ç½®
export HTTPS_PROXY="http://127.0.0.1:6153"
export HTTP_PROXY="http://127.0.0.1:6153"
export ALL_PROXY="socks5://127.0.0.1:6153"
export NO_PROXY="localhost,127.*,192.168.*,10.*,30.*,40.*,172.16.*,172.17.*,172.18.*,172.19.*,172.20.*,172.21.*,172.22.*,172.23.*,172.24.*,172.25.*,172.26.*,172.27.*,172.28.*,172.29.*,172.30.*,172.31.*"


# åŸºç¡€ç³»ç»Ÿç¯å¢ƒå˜é‡

export EDITOR="code-insiders"

export BROWSER="brave"

export LANG="zh_CN.UTF-8"

export XDG_CONFIG_HOME="${HOME}/AppData/Local"


# ç”¨æˆ·è‡ªå®šä¹‰ç¯å¢ƒå˜é‡
export DEFAULT_USER=$USER
export MANWIDTH=999
export LESSHISTFILE=-

# =============================================================================
#                               2. XDG ç›®å½•è§„èŒƒ
# =============================================================================

# éµå¾ª XDG Base Directory è§„èŒƒ

export XDG_CONFIG_HOME="$HOME/AppData/Local"
export XDG_DATA_HOME="$HOME/AppData/Local"
export XDG_STATE_HOME="$HOME/AppData/Local"
export XDG_CACHE_HOME="$HOME/AppData/Local/Temp"


# =============================================================================
#                               3. å¼€å‘ç¯å¢ƒé…ç½®
# =============================================================================

# Android å¼€å‘ç¯å¢ƒ

export ANDROID_HOME="$XDG_DATA_HOME/android"

export ANDROID_USER_HOME="$XDG_DATA_HOME/android"

export ANDROID_SDK_ROOT="$ANDROID_HOME"

# Go è¯­è¨€ç¯å¢ƒ

export GOPATH="$XDG_DATA_HOME/go"

export GOMODCACHE="$XDG_CACHE_HOME/go/mod"

export GOPROXY="https://goproxy.cn,direct"

# Java ç¯å¢ƒ

export _JAVA_OPTIONS="-Djava.util.prefs.userRoot="$XDG_CONFIG_HOME"/java"

# Rust ç¯å¢ƒ

export CARGO_HOME="$XDG_DATA_HOME/cargo"

export RUSTUP_HOME="$XDG_DATA_HOME/rustup"

# Python ç¯å¢ƒ

export PYTHONPATH="$XDG_DATA_HOME/python"

export PYTHONUSERBASE="$XDG_DATA_HOME/python"

export PIPENV_VENV_IN_PROJECT="1"

# Ruby ç¯å¢ƒ

export GEM_HOME="$XDG_DATA_HOME/gem"

export GEM_SPEC_CACHE="$XDG_CACHE_HOME/gem"

# Node.js ç¯å¢ƒ

export FNM_HOME="$XDG_DATA_HOME/fnm"

export NPM_CONFIG_USERCONFIG="$XDG_CONFIG_HOME/npm/config"

export NPM_CONFIG_CACHE="$XDG_CACHE_HOME/npm"

export NPM_CONFIG_PREFIX="$XDG_DATA_HOME/npm"

export PNPM_HOME="$XDG_DATA_HOME/pnpm"

export YARN_CACHE_FOLDER="$XDG_CACHE_HOME/yarn"

# Maven ç¯å¢ƒ

export MAVEN_OPTS="-Dmaven.repo.local=$XDG_DATA_HOME/maven/repository"

# Gradle ç¯å¢ƒ

export GRADLE_USER_HOME="$XDG_DATA_HOME/gradle"


# =============================================================================
#                               4. PATH ç¯å¢ƒå˜é‡æ„å»º
# =============================================================================
# fnm (Fast Node Manager) ç”¨äºç®¡ç†å¤šä¸ª Node.js ç‰ˆæœ¬
export PATH="/c/Users/afu/AppData/Local/fnm_multishells/23984_1753425089543":"$PATH"
export FNM_MULTISHELL_PATH="C:\\Users\\afu\\AppData\\Local\\fnm_multishells\\23984_1753425089543"
export FNM_VERSION_FILE_STRATEGY="local"    # ä½¿ç”¨æœ¬åœ° .node-version æ–‡ä»¶
export FNM_DIR="C:\\Users\\afu\\AppData\\Roaming\\fnm"      # fnm å®‰è£…ç›®å½•
export FNM_LOGLEVEL="info"                  # æ—¥å¿—çº§åˆ«
export FNM_NODE_DIST_MIRROR="https://nodejs.org/dist"       # Node.js ä¸‹è½½é•œåƒ
export FNM_COREPACK_ENABLED="false"         # ç¦ç”¨ Corepack
export FNM_RESOLVE_ENGINES="true"           # è‡ªåŠ¨è§£æ engines å­—æ®µ
export FNM_ARCH="x64"                       # ç³»ç»Ÿæ¶æ„

# Claude Code å·¥å…·çš„ Git Bash è·¯å¾„é…ç½®
export CLAUDE_CODE_GIT_BASH_PATH="C:\\Applications\\DevEnvironment\\Git\\bin\\bash.exe"

# MySQL å‘½ä»¤è¡Œå·¥å…·è·¯å¾„
export MYSQL="/C/Program Files/MySQL/MySQL Server 8.0/bin"

# æ„å»ºå¢å¼ºçš„ PATHï¼ˆæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼‰
export PATH="$MYSQL":"$PATH"

# =============================================================================
#                               5. Bash å†å²è®°å½•å¢å¼ºé…ç½®
# =============================================================================

# å†å²æ–‡ä»¶ä½ç½®ï¼ˆéµå¾ª XDG è§„èŒƒï¼‰
export HISTFILE="$HOME/dotfiles/generated/bash/history"
[ -d "$(dirname "$HISTFILE")" ] || mkdir -p "$(dirname "$HISTFILE")"

# å†å²è®°å½•è®¾ç½®
export HISTSIZE=10000
export HISTFILESIZE=50000

# å†å²è®°å½•é€‰é¡¹ï¼ˆBash ç‰ˆæœ¬çš„ ZSH åŠŸèƒ½ï¼‰
export HISTCONTROL=ignoreboth:erasedups  # å¿½ç•¥é‡å¤å’Œç©ºæ ¼å¼€å¤´çš„å‘½ä»¤
shopt -s histappend                      # è¿½åŠ å†å²è€Œä¸æ˜¯è¦†ç›–
shopt -s histverify                      # å†å²æ‰©å±•æ—¶ç»™ç”¨æˆ·ç¡®è®¤æœºä¼š
shopt -s nocaseglob                      # å¯ç”¨ä¸åŒºåˆ†å¤§å°å†™çš„æ–‡ä»¶ååŒ¹é…ï¼ˆglob æ¨¡å¼ï¼‰

# ç¦ç”¨ç»ˆç«¯é“ƒå£°ï¼Œé˜²æ­¢å±å¹•é—ªçƒ
if [[ $- == *i* ]]; then
    # ç¦ç”¨æ‰€æœ‰é“ƒå£°ï¼ˆåŒ…æ‹¬è§†è§‰é“ƒå£°å’Œå£°éŸ³é“ƒå£°ï¼‰
    bind 'set bell-style none'
    # æˆ–è€…å¯ä»¥é€‰æ‹©åªç¦ç”¨è§†è§‰é“ƒå£°ï¼Œä¿ç•™å£°éŸ³ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
    # bind 'set bell-style audible'
fi

# =============================================================================
#                               6. ç°ä»£åŒ–å·¥å…·é›†æˆ
# =============================================================================

# ç°ä»£åŒ–å‘½ä»¤æ›¿ä»£ï¼ˆæ™ºèƒ½æ£€æµ‹å’Œå›é€€ï¼‰

# Ls æ›¿ä»£
if command -v eza &> /dev/null; then
    
    alias ls='eza --color=auto --group-directories-first'
    
    alias ll='eza -l --color=auto --group-directories-first'
    
    alias la='eza -la --color=auto --group-directories-first'
    
    alias lt='eza --tree --color=auto'
    

else
    
    alias ls='ls --color=auto --group-directories-first'
    
    alias ll='ls --color=auto --group-directories-first'
    
    alias la='ls --color=auto --group-directories-first'
    
    alias lt='ls --color=auto --group-directories-first'
    

fi


# Cat æ›¿ä»£
if command -v bat &> /dev/null; then
    
    alias cat='bat'
    
    alias catn='bat --style=plain'
    

fi


# Grep æ›¿ä»£
if command -v rg &> /dev/null; then
    
    alias grep='rg'
    

fi


# Find æ›¿ä»£
if command -v fd &> /dev/null; then
    
    alias find='fd'
    

fi


# Du æ›¿ä»£
if command -v dust &> /dev/null; then
    
    alias du='dust'
    

fi


# Df æ›¿ä»£
if command -v duf &> /dev/null; then
    
    alias df='duf'
    

else
    
    alias df='df -h'
    

fi


# Ps æ›¿ä»£
if command -v procs &> /dev/null; then
    
    alias ps='procs'
    

fi


# Top æ›¿ä»£
if command -v htop &> /dev/null; then
    
    alias top='htop'
    

fi


# Cd æ›¿ä»£
if command -v zoxide &> /dev/null; then
    
    alias cd='z'
    

fi



# =============================================================================
#                               7. FZF é›†æˆé…ç½®
# =============================================================================


# FZF å‘½ä»¤é…ç½®ï¼ˆæ™ºèƒ½æ£€æµ‹ fd/findï¼‰
if command -v fd > /dev/null; then
    export FZF_DEFAULT_COMMAND="fd --type f --hidden --follow --exclude .git"
    export FZF_CTRL_T_COMMAND="fd --type f --hidden --follow --exclude .git"
    export FZF_ALT_C_COMMAND="fd --type d --hidden --follow --exclude .git"
else
    export FZF_DEFAULT_COMMAND="find . -type f -not -path '*/\.git/*'"
    export FZF_CTRL_T_COMMAND="find . -type f -not -path '*/\.git/*'"
    export FZF_ALT_C_COMMAND="find . -type d -not -path '*/\.git/*'"
fi

# FZF ä¸»é¢˜é…ç½®
export FZF_DEFAULT_OPTS="--color=fg:#f8f8f2,bg:#282a36,hl:#bd93f9 --color=fg+:#f8f8f2,bg+:#44475a,hl+:#bd93f9 --color=info:#8be9fd,prompt:#50fa7b,pointer:#ff79c6 --color=marker:#ff79c6,spinner:#ffb86c,header:#6272a4 --height=60% --layout=reverse --border --margin=1 --padding=1"

# FZF é”®ç»‘å®šå’Œè¡¥å…¨åˆå§‹åŒ– (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]] && command -v fzf > /dev/null; then
    # å¯ç”¨ FZF é”®ç»‘å®š (Ctrl+T, Ctrl+R, Alt+C)
    eval "$(fzf --bash)"
fi

# FZF é¢„è§ˆé…ç½®
if command -v bat > /dev/null; then
    export FZF_CTRL_T_OPTS="--preview 'bat -n --color=always --line-range :500 {}'"
else
    export FZF_CTRL_T_OPTS="--preview 'cat {}'"
fi

if command -v eza > /dev/null; then
    export FZF_ALT_C_OPTS="--preview 'eza --tree --color=always {} | head -200'"
elif command -v tree > /dev/null; then
    export FZF_ALT_C_OPTS="--preview 'tree -C {} | head -200'"
else
    export FZF_ALT_C_OPTS="--preview 'ls -la {}'"
fi



# =============================================================================
#                               8. åˆ«åå®šä¹‰
# =============================================================================

# å®‰å…¨æ“ä½œåˆ«å
alias cp="cp -i"
alias mv='mv -i'
alias rm='rm -i'

# ç³»ç»Ÿä¿¡æ¯åˆ«å
alias free='free -m -h'
alias df='df -h'

# ç½‘ç»œå·¥å…·åˆ«å (ports ç”±å‡½æ•°æä¾›)
# alias ports='netstat -tulanp'

# Git å¢å¼ºåˆ«å
alias g='git'

alias gs='git status'

alias ga='git add'

alias gaa='git add --all'

alias gc='git commit -m'

alias gca='git commit --amend'

alias gp='git push'

alias gl='git log --oneline'

alias gco='git checkout'

alias gb='git branch'

alias gd='git diff'

alias gds='git diff --staged'

# æ‰©å±• Git åˆ«åï¼ˆé¿å…ä¸åŸºç¡€åˆ«åé‡å¤ï¼‰
# æ³¨æ„ï¼šåŸºç¡€ Git åˆ«åç”±é…ç½®æ–‡ä»¶åŠ¨æ€ç”Ÿæˆï¼Œæ­¤å¤„ä»…æ·»åŠ ä¸åœ¨é…ç½®ä¸­çš„æ‰©å±•åˆ«å
alias gcb='git checkout -b'
alias gst='git stash'
alias gsta='git stash apply'
alias glg='git log --oneline --decorate --graph'
alias glog='git log --oneline --decorate --graph --all'

# ç¼–è¾‘å™¨åˆ«å
alias vim='code-insiders'
alias vi='code-insiders'

# Python å·¥å…·
alias py='python'
alias py3='python3'
alias pip='pip3'

# å¯¼èˆªåˆ«å

alias ..='cd ..'

alias ...='cd ../..'

alias ....='cd ../../..'

alias ~='cd ~'

alias projects='cd ~/Projects'

alias dotfiles='cd ~/dotfiles'


# ç³»ç»Ÿåˆ«å

alias open='explorer'

alias which='which'

alias grep='grep --color=auto'


# =============================================================================
#                               9. é«˜çº§å‡½æ•°å®šä¹‰
# =============================================================================


# åˆ›å»ºç›®å½•å¹¶è¿›å…¥
mkcd() { mkdir -p "$1" && cd "$1"; }


# æ™ºèƒ½æå–å„ç§å‹ç¼©æ ¼å¼
extract() {
    if [ -f "$1" ]; then
        case "$1" in
            *.tar.bz2)   tar xjf "$1"     ;;
            *.tar.gz)    tar xzf "$1"     ;;
            *.bz2)       bunzip2 "$1"     ;;
            *.rar)       unrar x "$1"     ;;
            *.gz)        gunzip "$1"      ;;
            *.tar)       tar xf "$1"      ;;
            *.tbz2)      tar xjf "$1"     ;;
            *.tgz)       tar xzf "$1"     ;;
            *.zip)       unzip "$1"       ;;
            *.Z)         uncompress "$1"  ;;
            *.7z)        7z x "$1"        ;;
            *.xz)        unxz "$1"        ;;
            *.lzma)      unlzma "$1"      ;;
            *)           echo "'$1' æ— æ³•è¢« extract() æå–" ;;
        esac
    else
        echo "'$1' ä¸æ˜¯æœ‰æ•ˆæ–‡ä»¶"
    fi
}


# æ€æ­»å ç”¨æŒ‡å®šç«¯å£çš„è¿›ç¨‹
killport() {
    if [ -z "$1" ]; then
        echo "ç”¨æ³•: killport <ç«¯å£å·>"
        return 1
    fi
    lsof -ti:$1 | xargs kill -9
}


# å¿«é€Ÿå¯åŠ¨ HTTP æœåŠ¡å™¨
serve() {
    local port=${1:-8000}
    if command -v python > /dev/null; then
        python -m http.server "$port"
    elif command -v python3 > /dev/null; then
        python3 -m http.server "$port"
    else
        echo "éœ€è¦å®‰è£… Python"
    fi
}


# è·å–å¤©æ°”ä¿¡æ¯
weather() {
    local location=${1:-"Beijing"}
    curl -s "wttr.in/$location?lang=zh"
}


# è·å–å…¬ç½‘ IP åœ°å€
myip() {
    curl -s ipinfo.io/ip
}


# æ˜¾ç¤ºç«¯å£ä½¿ç”¨æƒ…å†µ
ports() {
    netstat -tulanp
}


# æ˜¾ç¤ºå†…å­˜å ç”¨æœ€é«˜çš„è¿›ç¨‹
psmem() {
    ps aux | sort -nr -k 4 | head -10
}


# æ˜¾ç¤º CPU å ç”¨æœ€é«˜çš„è¿›ç¨‹
pscpu() {
    ps aux | sort -nr -k 3 | head -10
}


# å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶
findfile() {
    if command -v fd > /dev/null; then
        fd -t f "$1"
    else
        find . -name "*$1*" -type f 2>/dev/null
    fi
}


# å¿«é€ŸæŸ¥æ‰¾ç›®å½•
finddir() {
    if command -v fd > /dev/null; then
        fd -t d "$1"
    else
        find . -name "*$1*" -type d 2>/dev/null
    fi
}


# å¤‡ä»½æ–‡ä»¶
backup() {
    cp "$1" "$1.bak.$(date +%Y%m%d_%H%M%S)"
}


# æ¸…ç†å·²åˆå¹¶çš„ Git åˆ†æ”¯
gitclean() {
    git branch --merged | grep -v '\*\|main\|master\|develop' | xargs -n 1 git branch -d
}


# é‡æ–°åŠ è½½ shell é…ç½®
reload() {
    source ~/.bash_profile && echo "Bash é…ç½®å·²é‡æ–°åŠ è½½"
}


# æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
sysinfo() {
    echo "=== ç³»ç»Ÿä¿¡æ¯ ==="
    uname -a
    echo ""
    echo "=== å†…å­˜ä½¿ç”¨ ==="
    free -h
    echo ""
    echo "=== ç£ç›˜ä½¿ç”¨ ==="
    df -h
}



# =============================================================================
#                               10. å¤–éƒ¨å·¥å…·è‡ªåŠ¨åˆå§‹åŒ–
# =============================================================================

# æ£€æŸ¥å¹¶åˆå§‹åŒ–å¸¸ç”¨å·¥å…· (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then

    command -v thefuck > /dev/null && eval "$(thefuck --alias)"

    command -v gh_copilot > /dev/null && eval "$(gh copilot alias -- bash)"

    command -v fnm > /dev/null && eval "$(fnm env --use-on-cd)"

    command -v zoxide > /dev/null && eval "$(zoxide init bash)"

    command -v starship > /dev/null && eval "$(starship init bash)"

    command -v atuin > /dev/null && eval "$(atuin init bash)"

fi

# =============================================================================
#                               11. æŒ‰é”®ç»‘å®šå¢å¼º
# =============================================================================

# å†å²æœç´¢ç»‘å®š (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[A": history-search-backward'  # ä¸Šç®­å¤´
    bind '"\e[B": history-search-forward'   # ä¸‹ç®­å¤´
fi

# å•è¯å¯¼èˆª (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[1;5C": forward-word'          # Ctrl+å³ç®­å¤´
    bind '"\e[1;5D": backward-word'         # Ctrl+å·¦ç®­å¤´
fi

# è¡Œå¯¼èˆª (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind '"\e[3~": delete-char'             # Delete é”®
    bind '"\e[H": beginning-of-line'        # Home é”®
    bind '"\e[F": end-of-line'              # End é”®
fi

# =============================================================================
#                               12. è¡¥å…¨ç³»ç»Ÿå¢å¼º
# =============================================================================

# å¯ç”¨å¯ç¼–ç¨‹è¡¥å…¨
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi

# è¡¥å…¨é€‰é¡¹ (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    bind 'set completion-ignore-case on'     # å¿½ç•¥å¤§å°å†™
    bind 'set show-all-if-ambiguous on'      # æ˜¾ç¤ºæ‰€æœ‰åŒ¹é…é¡¹
    bind 'set menu-complete-display-prefix on' # æ˜¾ç¤ºå…¬å…±å‰ç¼€
fi

# =============================================================================
#                               13. Git é›†æˆå¢å¼º
# =============================================================================


# å¢å¼ºçš„ Git åˆ†æ”¯æ˜¾ç¤ºå‡½æ•°
parse_git_branch() {
    # å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿åœ¨Gitä»“åº“ä¸­ä¸”Gitå‘½ä»¤å¯ç”¨
    if ! command -v git >/dev/null 2>&1; then
        return 0
    fi
    
    # æ£€æŸ¥æ˜¯å¦åœ¨Gitä»“åº“ä¸­
    if ! git rev-parse --git-dir >/dev/null 2>&1; then
        return 0
    fi
    
    local branch status ahead
    
    # è·å–åˆ†æ”¯åï¼Œä½¿ç”¨æ›´å®‰å…¨çš„æ–¹æ³•
    branch=$(git symbolic-ref --short HEAD 2>/dev/null || git describe --tags --exact-match 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
    
    if [[ -n "$branch" ]]; then
        status=""
        ahead=""
        
        # æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
        if [[ -n "$(git status --porcelain 2>/dev/null)" ]]; then
            status="*"
        fi
        
        # æ£€æŸ¥æ˜¯å¦æœ‰æäº¤é¢†å…ˆï¼ˆæ›´å®‰å…¨çš„æ–¹å¼ï¼‰
        if git rev-parse --verify @{upstream} >/dev/null 2>&1; then
            local ahead_count
            ahead_count=$(git rev-list --count @{upstream}..HEAD 2>/dev/null)
            if [[ -n "$ahead_count" && "$ahead_count" -gt 0 ]]; then
                ahead="â†‘$ahead_count"
            fi
        fi
        
        echo "($branch$status$ahead)"
    fi
}

# å¢å¼ºçš„å‘½ä»¤æç¤ºç¬¦
if [[ $- == *i* ]]; then
    # åŸºç¡€æç¤ºç¬¦ï¼ˆå¦‚æœGitåˆ†æ”¯å‡½æ•°å¤±è´¥ï¼Œç¡®ä¿æœ‰åŸºæœ¬æç¤ºç¬¦ï¼‰
    export PS1="\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[00m\]\$ "
    
    # å¦‚æœGitå¯ç”¨ï¼Œæ·»åŠ åˆ†æ”¯æ˜¾ç¤º
    if command -v git > /dev/null; then
        export PS1="\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\]\$ "
    fi
fi



# =============================================================================
#                               14. æ€§èƒ½ä¼˜åŒ–
# =============================================================================

# ç¼–è¯‘ä¼˜åŒ–ï¼ˆå¦‚æœæ”¯æŒï¼‰

export MAKEFLAGS="-j$(nproc)"


# =============================================================================
#                               15. Windows ç‰¹å®šè®¾ç½®
# =============================================================================

if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win32" ]]; then
    # Windows è·¯å¾„è½¬æ¢
    export BROWSER="brave.exe"

    # Windows åˆ«åå¢å¼º
    alias start='explorer'
    alias notepad='notepad.exe'
    alias cls='clear'

    # Windows ç‰¹å®šçš„æœåŠ¡ç®¡ç†
    alias services='services.msc'
    alias regedit='regedit.exe'
fi

# =============================================================================
#                               16. å¯åŠ¨æ¶ˆæ¯å’ŒçŠ¶æ€
# =============================================================================

# å¯åŠ¨æ¶ˆæ¯ (ä»…åœ¨äº¤äº’æ¨¡å¼ä¸‹)
if [[ $- == *i* ]]; then
    echo "ğŸš€ å¢å¼º Bash ç¯å¢ƒå·²åŠ è½½ - èåˆ ZSH åŠŸèƒ½"
    echo "ğŸ“ é¡¹ç›®ç›®å½•: ~/Projects"
    echo "âš¡ ç¼–è¾‘å™¨: code-insiders"
    echo "ğŸ”§ ç°ä»£å·¥å…·: $(command -v eza >/dev/null && echo 'eza' || echo 'ls'), $(command -v bat >/dev/null && echo 'bat' || echo 'cat'), $(command -v fd >/dev/null && echo 'fd' || echo 'find')"

    # æ˜¾ç¤ºå¯ç”¨åŠŸèƒ½
    echo ""
    echo "ğŸ’¡ å¢å¼ºåŠŸèƒ½:"
    echo "   ğŸ“‚ ç°ä»£æ–‡ä»¶æ“ä½œ: ll, la, lt"
    echo "   ğŸ” æ™ºèƒ½æœç´¢: fzf é›†æˆ"
    echo "   ğŸŒ ç½‘ç»œå·¥å…·: myip, weather, ports"
    echo "   ğŸ› ï¸  ç³»ç»Ÿå·¥å…·: sysinfo, psmem, pscpu"
    echo "   ğŸ”§ å¼€å‘å·¥å…·: extract, killport, serve"
    echo "   ğŸ“¦ Git å¢å¼º: åˆ†æ”¯çŠ¶æ€æ˜¾ç¤º"
    echo ""
fi

# =============================================================================
#                               17. è‡ªå®šä¹‰é…ç½®åŠ è½½
# =============================================================================

# åŠ è½½æœ¬åœ°è‡ªå®šä¹‰é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
if [ -f ~/.bashrc.local ]; then
    if [[ $- == *i* ]]; then
        echo "ğŸ”§ åŠ è½½æœ¬åœ°è‡ªå®šä¹‰é…ç½®..."
    fi
    source ~/.bashrc.local
fi

# æ ‡è®°é…ç½®åŠ è½½å®Œæˆ
export DOTFILES_ENHANCED_BASH_LOADED=1